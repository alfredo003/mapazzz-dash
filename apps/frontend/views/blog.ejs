<link rel="stylesheet" href="css/reports.css">
<div class="content">

    <% if(messages.success && messages.success.length > 0) { %>
        <div id="success-alert" class="alert alert-success">
          <span class="message"><%= messages.success %></span>
          <button class="close-btn" onclick="closeAlert(this.parentElement)">&times;</button>
        </div>
      <% } %>
      <% if(messages.error && messages.error.length > 0) { %>
        <div id="error-alert" class="alert alert-danger">
          <span class="message"><%= messages.error %></span>
          <button class="close-btn" onclick="closeAlert(this.parentElement)">&times;</button>
        </div>
      <% } %>

      
<!-- Blogs Page -->
<div id="blogs-page" class="page active">
    <!-- Add Blog Form -->
    <div class="card" style="--card-index: 0;">
        <div class="card-header">
            <h3><i class="fas fa-blog"></i> Adicionar Novo Blog</h3>
        </div>
        <div class="card-body">
            <form id="blogForm" class="needs-validation" action="/blog" method="POST" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="blogTitle">Título</label>
                    <input type="text" id="blogTitle" name="title" class="form-control" 
                           required minlength="3" maxlength="100"
                           placeholder="Digite o título do blog">
                    
                </div>
                <div class="form-group">
                    <label for="blogDescription">Descrição</label>
                    <textarea id="blogDescription" name="content" class="form-control" 
                            rows="5" required minlength="10"
                            placeholder="Digite a descrição do blog"></textarea>
                   
                </div>
                <div class="form-group">
                    <label for="blogPhoto">Imagem</label>
                    <div class="input-group">
                        <input type="file" id="blogPhoto" name="file" class="form-control"  required>    
                    </div>
                    <small class="form-text text-muted">Insira imagem (jpg, png, gif)</small>
                </div>
                <div class="form-group mt-4">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus-circle"></i> Adicionar Blog
                    </button>
                    <button type="reset" class="btn btn-secondary">
                        <i class="fas fa-undo"></i> Limpar
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Blogs List -->
    <div class="card" style="--card-index: 1;">
        <div class="card-header">
            <h3><i class="fas fa-list"></i> Lista de Blogs</h3>
           
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table id="blogsTable" class="table table-hover">
                    <thead class="table-light">
                        <tr>
                            <th>Foto</th>
                            <th>Título</th>
                            <th>Conteudo</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="blogsTableBody">
                        <% if (blogs && blogs.length > 0) { %>
                            <% blogs.forEach(blog => { %>
                                <tr>
                                    <td>
                                        <img src="<%=blog.imgUrl ? blog.imgUrl  : blog.imageUrl %>" alt="<%= blog.title %>" class="img-thumbnail"/>
                                    </td>
                                    <td><%= blog.title %></td>
                                    <td><%= blog.body.length > 100 ? blog.body.substring(0, 100) + '...' : blog.body %></td>
                                    
                                    <td>
                                        <button class="btn btn-outline btn-sm" onclick="" title="Visualizar detalhes">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn btn-outline btn-sm" onclick="" title="Editar">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                </tr>
                            <% }); %>
                        <% } else { %>
                            <tr>
                                <td colspan="5" class="text-center">Nenhuma conteudo encontrado.</td>
                            </tr>
                        <% } %>
                    </tbody>
                </table>
            </div>
            <nav aria-label="Navegação de páginas" class="mt-3">
                <ul class="pagination justify-content-center" id="blogsPagination">
                    <!-- Pagination will be dynamically inserted here -->
                </ul>
            </nav>
        </div>
    </div>
</div>
</div>